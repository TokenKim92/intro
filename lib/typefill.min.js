/*! For license information please see typefill.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TypeFill=e():t.TypeFill=e()}(self,(()=>(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>b});const i=Object.freeze({string:"string",number:"number",boolean:"boolean",undefined:"undefined",null:"null"}),s=(t,e)=>{if(typeof t!==i[e])throw new Error(`This parameter type should be the ${i[e]}.`)},r=(t,e,i,s)=>{const r=i-t,h=s-e;return Math.sqrt(r*r+h*h)},h=t=>({x:Math.round(t.x+Math.random()*t.width),y:Math.round(t.y+Math.random()*t.height)}),a=(t,e,i)=>r(t.x,t.y,e.x,e.y)<=i,o=(t,e,i)=>e.x-i.left<=t.x&&t.x<=e.x+i.right,n=(t,e,i)=>e.y-i.top<=t.y&&t.y<=e.y+i.bottom,l="The color type should be 'rgb' or 'hex' like 'rgb(0, 0, 0)' or '#000000'.",c=t=>{if(typeof t!==i.string)throw new Error(l);const e=u(t.toLowerCase());if(3!==e.length&&4!==e.length||e.includes(NaN))throw new Error(l);return e.forEach((t=>{if(t>255||t<0)throw new Error(l)})),{r:e[0],g:e[1],b:e[2],a:void 0===e[3]?1:e[3]}},u=t=>{if(t.includes("rgb")){const e=t.indexOf("("),i=t.indexOf(")");return t.substring(e+1,i).split(", ").map((t=>parseFloat(t)))}if(t.includes("#"))return t.slice(1,t.length).match(/.{1,2}/g).map((t=>parseFloat(t,16)));throw new Error(l)},g=t=>{const e=t.split(" ").map((t=>parseInt(t)));switch(e.length){case 1:return{top:e[0],right:e[0],bottom:e[0],left:e[0]};case 2:return{top:e[0],right:e[1],bottom:e[0],left:e[1]};case 3:return{top:e[0],right:e[1],bottom:e[2],left:0};case 4:return{top:e[0],right:e[1],bottom:e[2],left:e[3]}}},d=t=>g(t),f=t=>g(t),p=class{#t;#e;#i=0;#s;#r;constructor(t,e,i,s){this.#t=t,this.#r=void 0!==s?{x:i.x+i.width*s,y:i.y+i.height*s}:h(i),this.#s=this.#h(this.#r,i),this.#e=this.#a(this.#s,e)}reset=()=>{this.#i=0};#h=(t,e)=>{const i=r(e.x,e.y,t.x,t.y),s=r(e.x+e.width-1,e.y,t.x,t.y),h=r(e.x,e.y+e.height-1,t.x,t.y),a=r(e.x+e.width-1,e.y+e.height-1,t.x,t.y);return Math.max(i,s,h,a)};#a=(t,e)=>t/this.#t*e;update=()=>{this.#i<=this.#s&&(this.#i+=this.#e)};get Metrics(){return{point:{x:this.#r.x,y:this.#r.y},area:this.#i}}},x=class{#t;#o;#e;#n={left:0,right:0};#l;#r;constructor(t,e,i,s){this.#t=t,this.#o=e,this.#r=void 0!==s?{x:i.x+i.width*s,y:i.y+i.height/2}:{x:h(i).x,y:i.y+i.height/2},this.#l={left:this.#r.x-i.x,right:i.x+i.width-this.#r.x},this.#e=this.#a(this.#l,e)}reset=()=>{this.#n={left:0,right:0}};#a=()=>({left:this.#l.left/this.#t*this.#o,right:this.#l.right/this.#t*this.#o});update=()=>{this.#n.left<=this.#l.left&&(this.#n.left+=this.#e.left),this.#n.right<=this.#l.right&&(this.#n.right+=this.#e.right)};get Metrics(){return{point:{x:this.#r.x,y:this.#r.y},area:this.#n}}},m=class{#t;#o;#e;#c={top:0,bottom:0};#u;#r;constructor(t,e,i,s){this.#t=t,this.#o=e,this.#r=void 0!==s?{x:i.x+i.width/2,y:i.y+i.height*s}:{x:i.x+i.width/2,y:h(i).y},this.#u={top:this.#r.y-i.y,bottom:i.y+i.height-this.#r.y},this.#e=this.#a(this.#u,e)}reset=()=>{this.#c={top:0,bottom:0}};#a=()=>({top:this.#u.top/this.#t*this.#o,bottom:this.#u.bottom/this.#t*this.#o});update=()=>{this.#c.top<=this.#u.top&&(this.#c.top+=this.#e.top),this.#c.bottom<=this.#u.bottom&&(this.#c.bottom+=this.#e.bottom)};get Metrics(){return{point:{x:this.#r.x,y:this.#r.y},area:this.#c}}};class y{static FPS=60;static FPS_TIME=1e3/y.FPS|0;static DEFAULT_CREATOR=p;static DEFAULT_COLLIDE=a;static OPACITY_TRANSITION_TIME=300;#g;#d;#f=void 0;#p;#x;#m;#y;#b=[];#T;#S;#w;#C;#v;#F;#I;#P=0;#E;#L;#A;#M=!1;#z;#O;#R=!1;#B;#k=0;#D;#j;#H;#_=[{figure:"horizontal",creator:x,collide:o},{figure:"vertical",creator:m,collide:n},{figure:"ripple",creator:p,collide:a}];constructor(t,e=1e3,r){if(s(t,i.string),s(e,i.number),this.#m=document.querySelector(`#${t}`),!this.#m)throw new Error("This element id doesn't exit.");if(e<=0)throw new Error("'fillTime' should be greater then 0.");this.#W(r),this.#F=e,this.#I=e/y.FPS_TIME,this.#y=this.#m.innerText,this.#L=window.getComputedStyle(this.#m),this.#E=c(this.#L.color),this.#$(),setTimeout((()=>this.#N()),1.1*y.OPACITY_TRANSITION_TIME),window.addEventListener("resize",this.#q)}start=()=>{this.#R?this.#M||(this.#M=!0,requestAnimationFrame(this.#G)):setTimeout((()=>this.start()),y.OPACITY_TRANSITION_TIME)};stop=()=>{this.#M&&(this.#M=!1)};restart=()=>{this.#R?(this.#O.data.fill(0),this.#d.putImageData(this.#O,0,0),this.#P=0,this.#b.forEach((t=>t.reset())),this.#Y(),this.#M||(this.#M=!0,requestAnimationFrame(this.#G))):setTimeout((()=>this.start()),y.OPACITY_TRANSITION_TIME)};setHandleStop=t=>{this.#B=t};#W=t=>{if(void 0!==t)void 0!==t.figure&&(s(t.figure,i.string),this.#_.filter((e=>e.figure===t.figure)).length||console.warn("Since this figure is not valid, 'ripple' is used as the default.")),void 0!==t.ratio&&(s(t.ratio,i.number),0<=t.ratio&&t.ratio<=1||(t.ratio=void 0,console.warn("The ratio must be a number between 0 and 1. The starting position is randomly set due to the invalidation of the ratio."))),this.#U(t);else{const t={figure:"ripple",ratio:void 0};this.#U(t)}};#U=t=>{const e=this.#_.length;let i,s;for(this.#H=t.ratio,i=0;i<e;i++)if(s=this.#_[i],t.figure===s.figure)return this.#j=s.creator,void(this.#D=s.collide);i===e&&(this.#j=y.DEFAULT_CREATOR,this.#D=y.DEFAULT_COLLIDE)};#$=()=>{this.#x=document.createElement("div"),this.#m.parentElement.insertBefore(this.#x,this.#m),this.#x.append(this.#m),this.#x.style.position="relative",this.#m.style.transition=`opacity ${y.OPACITY_TRANSITION_TIME}ms ease-out`,setTimeout((()=>{this.#m.style.opacity=0}),1)};#V=()=>{const t=d(this.#L.padding),e=f(this.#L.margin),i=0!==c(this.#L.backgroundColor).a;this.#v=this.#J(this.#m),(()=>{this.#z=document.createElement("div"),this.#z.style.transform="inline"!==this.#L.display?this.#L.transform:"matrix(1, 0, 0, 1, 0, 0)",this.#z.style.top=`-${this.#v.height+e.top+e.bottom}px`,this.#z.style.position="relative"})(),i&&((()=>{this.#f=document.createElement("canvas"),this.#p=this.#f.getContext("2d"),this.#f.style.cssText=`\n        left: ${e.left}px;\n        top: ${e.top}px;\n      `,this.#K(),this.#f.style.position="absolute"})(),this.#z.append(this.#f)),(()=>{this.#g=document.createElement("canvas"),this.#d=this.#g.getContext("2d",{willReadFrequently:!0}),this.#g.style.position="absolute",this.#g.style.top=`${t.top+e.top}px`})(),this.#z.append(this.#g),this.#x.append(this.#z),this.#Q(t,e)};#N=()=>{this.#V(),this.#T=new class{#d;#L;#y;#X;#Z;constructor(t,e,i,s){this.#d=t,this.#L=e,this.#y=i,this.#X=s}getMetrics=t=>{this.#Z=[],this.#d.save(),this.#d.font=`${this.#L.fontWeight} ${this.#L.fontSize} ${this.#L.fontFamily}`,this.#d.fillStyle=`rgba(255, 255, 255, ${this.#X})`,this.#d.textBaseline="middle";const e=[];1===this.#tt(t)?(this.#et(t,this.#y),this.#it(this.#y).forEach((t=>e.push(t)))):this.#st(t).forEach(((i,s)=>{this.#et(t,i,s),this.#it(i,s).forEach((t=>e.push(t)))}));const i=this.#rt(t,e);return this.#d.clearRect(0,0,t.width,t.height),this.#d.restore(),{textFields:e,pixelInfosList:i}};#st=t=>{const e=[];return this.#y.split("\n").forEach((i=>{const s=i.split(" ");let r="",h=!1,a=!1;s.forEach(((i,o)=>{h=this.#d.measureText(r+i).width>t.width,a=o===s.length-1,h?(e.push(r.trimEnd()),a?e.push(i):r=i+" "):a?e.push(r+i):r=r+i+" "}))})),e};#et=(t,e,i=0)=>{const s=this.#d.measureText(e),r=this.#ht(t,s,i);this.#Z.push(r),this.#d.fillText(e,r.x,r.y)};#it=(t,e=0)=>{const i=[],s=[],r=this.#Z[e];let h,a,o,n,l,c="";for(let e=0;e<t.length;e++)h=t[e],a=this.#d.measureText(h)," "!==h?(n=this.#d.measureText(c+h).width-this.#d.measureText(c).width,l=n!==a.width?a.width-n:0,o={x:0===e?Math.round(r.x-a.actualBoundingBoxLeft):Math.round(s.reduce(((t,e)=>t+e),r.x)-a.actualBoundingBoxLeft-l),y:Math.round(r.y-a.actualBoundingBoxAscent-1),width:Math.round(a.actualBoundingBoxLeft+a.actualBoundingBoxRight),height:Math.round(a.actualBoundingBoxAscent+a.actualBoundingBoxDescent+2)},s.push(n),i.push(o),c=h):s.push(a.width);return i};#rt=(t,e)=>{const i=[],s=this.#d.getImageData(0,0,t.width,t.height);let r=0;return e.forEach(((e,h)=>{i.push(new Array);for(let a=e.y;a<e.y+e.height;a++)for(let o=e.x;o<e.x+e.width;o++)r=s.data[4*(o+a*t.width)+3],r&&i[h].push({x:o,y:a,alpha:r})})),i};#ht=(t,e,i)=>({x:(()=>{switch(this.#L.textAlign){case"end":return Math.round(t.width-e.width);case"center":return Math.round((t.width-e.width)/2);case"justify":console.warn("'justify' option doesn't work.");default:return 0}})(),y:(i=>{const s=this.#at(t),r=(s+e.actualBoundingBoxAscent-e.actualBoundingBoxDescent)/2;return Math.round(r+s*i)})(i)});#at=t=>{if("normal"!==this.#L.lineHeight)return parseInt(this.#L.lineHeight);const e=1.2*parseInt(this.#L.fontSize),i=Math.round(t.height/e);return t.height/i};#tt=t=>Math.round(t.height/this.#at(t))}(this.#d,this.#L,this.#y,this.#E.a),this.#ot(),this.#R=!0};#q=()=>{const t=this.#J(this.#m),e=t.height!==this.#v.height,i=t.width-this.#v.width;if(this.#v=t,this.#f&&this.#K(),!e){const t="center"===this.#L.textAlign?i/2:i;if("end"===this.#L.textAlign||"center"===this.#L.textAlign){const e=parseInt(this.#g.style.left);this.#g.style.left=`${e+t}px`}return}const s=d(this.#L.padding),r=f(this.#L.margin);this.#z.style.top=`-${t.height+r.top+r.bottom}px`,this.#Q(s,r),this.#ot(),this.restart()};#Q=(t,e)=>{this.#g.style.left=`${t.left+e.left}px`,this.#C=this.#J(this.#m,t.left+t.right,t.top+t.bottom),this.#g.width=this.#C.width,this.#g.height=this.#C.height,this.#O=this.#d.getImageData(0,0,this.#C.width,this.#C.height)};#K=()=>{this.#f.width=this.#v.width,this.#f.height=this.#v.height,this.#p.fillStyle=this.#L.backgroundColor,this.#p.fillRect(0,0,this.#v.width,this.#v.height)};#ot=()=>{const t=this.#T.getMetrics(this.#C);this.#b=t.textFields.map((t=>new this.#j(this.#F,y.FPS_TIME,t,this.#H))),this.#A=this.#b.length,this.#S=t.pixelInfosList,this.#Y()};#Y=()=>{this.#w=new Array,this.#S.forEach((t=>this.#w.push([...t])))};#G=t=>{if(this.#M){if(this.#P>this.#I)return this.#M=!1,void(this.#B&&this.#B());t-this.#k>y.FPS_TIME&&(this.#nt(),this.#k=t),requestAnimationFrame(this.#G)}};#nt=()=>{for(let t=0;t<this.#A;t++){const e=this.#b[t],i=this.#w[t];e.update(),this.#w[t]=i.filter((t=>{const i=this.#D(t,e.Metrics.point,e.Metrics.area);if(i){const e=t.x+t.y*this.#C.width;this.#O.data[4*e]=this.#E.r,this.#O.data[4*e+1]=this.#E.g,this.#O.data[4*e+2]=this.#E.b,this.#O.data[4*e+3]=t.alpha}return!i}))}this.#d.putImageData(this.#O,0,0),this.#P++};#J=(t,e=0,i=0)=>({width:Math.round(t.offsetWidth-e),height:Math.round(t.offsetHeight-i)})}const b=y;return e.default})()));